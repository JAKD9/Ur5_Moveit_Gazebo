mkdir -p ~/catkin_ws/src
cd ~/catkin_ws/src
catkin_init_workspace
cd ~/catkin_ws
catkin_make
echo "source ~/catkin_ws/devel/setup.bash" >> ~/.bashrc
sudo apt-get install git (if git is not installed.)
sudo apt-get install -y libgazebo7-dev
cd ~/catkin_ws/src
git clone https://github.com/ros-simulation/gazebo_ros_pkgs.git -b kinetic-devel
rosdep update
rosdep check --from-paths . --ignore-src --rosdistro kinetic
rosdep install --from-paths . --ignore-src --rosdistro kinetic -y

After this step put gazebo_ros_moveit_planning_scene.h file to: 
~/catkin_ws/src/gazebo_ros_pkgs/gazebo_plugins/include/gazebo_plugins

And put gazebo_ros_moveit_planning_scene.cpp to:
~/catkin_ws/src/gazebo_ros_pkgs/gazebo_plugins/src

Then:
cd ~/catkin_ws/
catkin_make


This should create gazebo_ros_moveit_planning_scene.so file which is used as the plugin.
